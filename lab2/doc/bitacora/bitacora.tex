\documentclass[10pt]{article}

\usepackage{graphicx}
\usepackage{amsmath}
\usepackage[ansinew]{inputenc}
\usepackage[spanish]{babel}
\usepackage{babelbib}
\usepackage[T1]{fontenc}
\usepackage[vmargin=4cm,hmargin=4cm,letterpaper]{geometry}
\usepackage{color}
\usepackage{framed}
\usepackage{hyperref}

\usepackage{listings}
\definecolor{red}{RGB}{219,0,0}
\definecolor{pink}{RGB}{255,100,100}
\definecolor{gray}{RGB}{100,100,100}
\lstset{
		basicstyle=\ttfamily,
		frame=single,
		keywordstyle=\color{red},
		commentstyle=\color{gray},
		stringstyle=\color{pink},
		tabsize=3,
		language=verilog,
		backgroundcolor=\color{white}}

\usepackage{fancyhdr} 
\pagestyle{fancy}
\usepackage{lastpage}
\lhead{Laboratorio 2}
\chead{}
\rhead{Anteproyecto}
\lfoot{}
\cfoot{}
\rfoot{\footnotesize Page \thepage\ of \pageref{LastPage}}

\renewcommand{\headrulewidth}{0.4pt} 
\renewcommand{\footrulewidth}{0.4pt} 

\graphicspath{{../media/}}	%%multimedia path
\setlength{\parindent}{0pt}
%%*************************************************************************
\begin{document}

\begin{huge}
\begin{center}
\textbf{Laboratorio 2: Circuitos Combinatorios}
\end{center}
\end{huge}

\begin{Large}
\begin{center}
Jose Apú (B10407), Francisco Molina (B12345), \\Marco Montero (A94000), Dennis Vargas (B16831)
\end{center}
\end{Large}


\section*{Ejercicio 1}
Se agregó e implemento la operación SMUL al experimento 1 de distintas formas, multiplicando los valores de src1 y src2 y guardando el resultado en dst. Se comparó las frecuencias, además del número de LUTs, Slices y Flip-Flops. Para este primer ejercicio se probó utilizando el operador *, tanto para multiplicación sin signo como para multiplicación con signo. \\[0.3 cm]
Para la multiplicación sin signo se obtuvieron los resultados de las figuras \ref{freq1} y \ref{mux1}. 
\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/mul_max_freq.png}
\caption{Frecuencia máxima del operador * sin signo}
\label{freq1}
\end{figure}

\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/mul_table.png}
\caption{ LUTs, Slices y Flip-Flops del operador * sin signo}
\label{mux1}
\end{figure}
\newpage

Para la multiplicación con signo primero se probó que efectivamente se estaba realizando la operación correctamente con la figura  \ref{signed} y luego se obtuvieron los resultados de las figuras \ref{freq1a} y \ref{mux1a}. 

\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/sim_mul_signed.png}
\caption{Prueba multiplicación con signo}
\label{signed}
\end{figure}

\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/wo_mul_max_freq.png}
\caption{Frecuencia máxima del operador * sin signo}
\label{freq1a}
\end{figure}

\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/wo_mul_table.png}
\caption{ LUTs, Slices y Flip-Flops del operador * sin signo}
\label{mux1a}
\end{figure}
\newpage

\section*{Ejercicio 2}
Los bloques de multiplicación del FPGA son además capaces de llevar acabo multiplicaciónes con signo (con números representados en complemento a 2). Para esto es
necesario que la herramienta de síntesis entienda que las lineas de entrada a los puertos del multiplicador tienen signo. \\Esto se hace de la siguiente manera:
\begin{lstlisting}
wire [9:0] wA, wB;
wire [31:0] R = wA * wB; //multiplicación sin signo
wire signed [15:0] wA, wB;
wire signed [31:0] wR = wA * wB; // multiplicación con signo
\end{lstlisting}
Note en la figura siguiente como el simulador reconoce la multiplicación con signo:
\begin{figure}[hbtp]
\centering
\includegraphics[width=12 cm]{media/r1.png}
\caption{}
\label{p1}
\end{figure}

\section*{Ejercicio 3}


\pagebreak 
\section*{Ejercicio 4}
Luego de una serie de pruebas se determinó cual es la cantidad de espacios que se debe desplazar cada resultado parcial para multiplicar números con más de 2 bits. En la figura \ref{p2} se muestra la estrucutura implementada para multiplicar números de 8 bits y siguiendo la misma lógica se puede obtener fácilmente una función para multiplicar 16 bits o inclusive más.
\begin{figure}[hbtp]
\centering
\includegraphics[width=14 cm]{media/Muxed.png}
\caption{Multiplicador 8 bits con LUT}
\label{p2}
\end{figure}

\section*{Ejercicio 5}
Para implementar un multiplexor que codifique una LUT de 4 bits, se debe cumplir la tabla de verdad del cuadro \ref{t1}. Si se observa con detenimiento en la tabla, se logra identificar un patrón en el resultado de las multiplicaciones. 
Una ventaja de utilizar este multiplexor es que se necesitarán menos módulos para multiplicar números de mayor cantidad de bits. Por ejemplo, con el mux implementado en el ejercicio anterior para multiplicar números de 8 bits se necesitrían 4 multiplexores, mientras que utlizando este nuevo multiplexor, solamente es necesario utilizar 2.
Una posible desventaja es que a la hora de multiplicar números mayores a 4 bits, se puede tornar un poco engorroso identificar cuantos posiciones a la izquierda se debe desplazar cada subresultado de 4 bits.

\begin{table}[h!]
\centering 
\caption{Tabla de verdad de Mux para LTU de 4 bits}
\begin{tabular}{cl}
\hline
 B(4 bits) &        AxB \\
\hline
      0000 &          0 \\

      0001 &          A \\

      0010 &       A$<<$1 \\

      0011 &   (A$<<$1)+A \\

      0100 &       A$<<$2 \\

      0101 &   (A$<<$2)+A \\

      0110 & (A$<<$2)+(A$<<$1) \\

      0111 & (A$<<$2)+(A$<<$1)+A \\

      1000 &       A$<<$3 \\

      1001 &   (A$<<$3)+A \\

      1010 & (A$<<$3)+(A$<<$1) \\

      1011 & (A$<<$3)+(A$<<$1)+A \\

      1100 & (A$<<$3)+(A$<<$2) \\

      1101 & (A$<<$3)+(A$<<$2)+A \\

      1110 & (A$<<$3)+(A$<<$2)+(A$<<$1) \\

      1111 & (A$<<$3)+(A$<<$2)+(A$<<$1)+A \\

\end{tabular}  
\label{t1}
\end{table}


\end{document}
%%*************************************************************************
